# 앱인토스 샌드박스 테스트 가이드

토스 앱인토스에서 앱을 실제 환경에서 테스트하기 전에 샌드박스(테스트 환경)에서 검증하는 방법입니다.

## 📋 목차

1. [사전 준비](#사전-준비)
2. [샌드박스 앱 다운로드](#샌드박스-앱-다운로드)
3. [테스트용 앱 등록](#테스트용-앱-등록)
4. [QR 코드 생성 및 테스트](#qr-코드-생성-및-테스트)
5. [테스트 체크리스트](#테스트-체크리스트)
6. [문제 해결](#문제-해결)

---

## 사전 준비

### 필수 요구사항

1. **앱인토스 개발자 계정**
   - [앱인토스 개발자센터](https://developers-apps-in-toss.toss.im) 접속
   - 개발자 계정 생성 및 로그인 완료

2. **웹 앱 배포 완료**
   - Vercel 또는 다른 플랫폼에 배포 완료
   - HTTPS URL 확인 (예: `https://your-app.vercel.app`)
   - 앱이 정상적으로 작동하는지 확인

3. **테스트 기기**
   - Android 또는 iOS 기기
   - 토스 앱 설치된 기기 (선택사항)

---

## 샌드박스 앱 다운로드

앱인토스는 테스트 전용 샌드박스 앱을 제공합니다.

### 1. 개발자센터 접속

1. [앱인토스 개발자센터](https://developers-apps-in-toss.toss.im) 접속
2. 로그인

### 2. 샌드박스 앱 다운로드 페이지 찾기

1. 메뉴에서 **"개발"** 또는 **"테스트"** 섹션 클릭
2. **"샌드박스 앱"** 또는 **"테스트앱"** 메뉴 클릭
3. 또는 직접 URL: `https://developers-apps-in-toss.toss.im/development/test.html`

### 3. 플랫폼별 다운로드

#### Android
- **다운로드 링크**: (콘솔에서 제공)
- **설치 방법**:
  1. APK 파일 다운로드
  2. 기기에서 "알 수 없는 소스" 허용 (설정 > 보안)
  3. APK 파일 설치

#### iOS
- **다운로드 링크**: (콘솔에서 제공)
- **설치 방법**:
  1. TestFlight 링크 클릭
  2. TestFlight 앱에서 설치
  3. 또는 개발자 인증서로 빌드 설치

---

## 테스트용 앱 등록

샌드박스에서 테스트하려면 먼저 앱인토스 콘솔에 앱을 등록해야 합니다.

### 1. 앱 등록

1. **앱인토스 콘솔 > 내 앱** 접속
2. **"새 앱 등록"** 클릭

### 2. 필수 정보 입력

#### 기본 정보
- **앱 이름**: 포켓 카드 헌터: 몬스터 키우기
- **고유 ID (`appName`)**: `pocket-card-hunter`
  - ⚠️ 중요: 영문 소문자, 숫자, 대시(-)만 사용
  - 변경 불가하므로 신중하게 입력
- **앱 타입**: 웹앱 (WebView)

#### 웹 URL 등록
- **웹 URL**: `https://my-pokemon-pokedex-seven.vercel.app/`
  - ✅ HTTPS 적용됨
  - ✅ 앱이 정상 작동하는지 확인 완료

#### 최소 정보 입력 (테스트용)
- 앱 이름: ✅
- 고유 ID: ✅
- 웹 URL: ✅
- 앱 로고: (임시라도 업로드 - 나중에 수정 가능)
- 앱 설명: (간단히 입력)

### 3. 저장 및 확인

1. **"저장"** 또는 **"등록"** 클릭
2. 앱이 등록되면 앱 목록에서 확인
3. 앱 상세 페이지로 이동

---

## QR 코드 생성 및 테스트

### 방법 1: 샌드박스 앱에서 QR 코드 스캔

1. **샌드박스 앱 실행**
   - 다운로드한 샌드박스 앱 실행

2. **QR 코드 생성**
   - 앱인토스 콘솔 > 내 앱 > 등록한 앱 클릭
   - **"테스트"** 또는 **"QR 코드"** 메뉴 클릭
   - QR 코드 이미지 생성 (화면에 표시)

3. **QR 코드 스캔**
   - 샌드박스 앱에서 QR 코드 스캔 기능 실행
   - 생성된 QR 코드를 스캔
   - 앱이 샌드박스 앱 내에서 열림

4. **테스트 진행**
   - 앱 기능 모두 테스트
   - 정상 작동 확인

### 방법 2: 토스 앱에서 QR 코드로 테스트 (실제 환경)

1. **QR 코드 생성**
   - 앱인토스 콘솔에서 QR 코드 생성

2. **토스 앱 실행**
   - 토스 앱 열기
   - 앱인토스 메뉴 찾기 (보통 하단 메뉴)

3. **QR 코드 스캔**
   - 토스 앱 내에서 QR 코드 스캔
   - 테스트용 앱 실행

---

## 테스트 체크리스트

샌드박스에서 다음 항목들을 확인하세요:

### 기본 기능

- [ ] **앱 로딩**
  - 앱이 정상적으로 로드되는가?
  - 흰 화면 없이 정상 표시되는가?

- [ ] **카드 스캔 기능**
  - 카메라 권한 요청 정상 작동
  - 카드 촬영 기능
  - 분석 버튼 클릭
  - 분석 결과 표시

- [ ] **도감 기능**
  - 도감 페이지 접근
  - 저장된 카드 목록 표시
  - 카드 상세 정보 확인
  - 타입별/희귀도별 필터링

- [ ] **파트너 몬스터**
  - 파트너 선택 (첫 실행)
  - 레벨 및 진화 상태 표시
  - XP 계산 정상 작동

- [ ] **부모 모드**
  - 부모 모드 접근
  - API 키 설정
  - 데이터 관리 기능

- [ ] **법적 페이지**
  - 개인정보 처리방침 접근 (`/privacy`)
  - 이용약관 접근 (`/terms`)

### 레이아웃 및 UI

- [ ] **모바일 최적화**
  - 세로 모드 정상 표시
  - 하단 네비게이션 바 표시
  - 버튼 크기 적절

- [ ] **반응형 디자인**
  - 다양한 화면 크기에서 정상 표시
  - 이미지 비율 유지
  - 텍스트 가독성

- [ ] **네비게이션**
  - 스캔/도감/부모님 메뉴 이동
  - 뒤로가기 버튼 작동 (선택사항)

### 성능 및 안정성

- [ ] **로딩 속도**
  - 초기 로딩 시간 적절
  - 이미지 로딩 속도

- [ ] **오류 처리**
  - 네트워크 오류 처리
  - API 오류 처리 (할당량 초과 등)
  - 사용자 친화적인 오류 메시지

- [ ] **크래시 없음**
  - 앱이 예기치 않게 종료되지 않음
  - 모든 화면 전환 정상 작동

### 앱인토스 특화

- [ ] **WebView 호환성**
  - 앱인토스 WebView에서 정상 작동
  - 외부 브라우저와 동일한 동작

- [ ] **토스 앱 통합**
  - 토스 앱 내에서 자연스러운 실행
  - 뒤로가기 등 네비게이션 정상 작동

---

## 문제 해결

### 앱이 로드되지 않음

**문제**: 흰 화면만 표시됨

**해결 방법**:
1. 웹 URL이 정확한지 확인
2. HTTPS 연결 확인
3. 브라우저에서 직접 접속하여 정상 작동 확인
4. CORS 설정 확인 (`vercel.json`)
5. 콘솔 로그 확인 (디버깅 도구 사용)

### 카메라 권한 오류

**문제**: 카메라 권한을 요청하지 않음

**해결 방법**:
1. WebView에서 카메라 권한 허용
2. `index.html`에 카메라 메타 태그 확인
3. HTTPS 연결 필수 (카메라는 HTTPS에서만 작동)

### CORS 오류

**문제**: 리소스를 불러올 수 없음

**해결 방법**:
1. `vercel.json`에 CORS 헤더 추가 확인
2. Vercel에 재배포
3. 브라우저 개발자 도구에서 오류 확인

### 이미지가 표시되지 않음

**문제**: 카드 이미지나 아이콘이 안 보임

**해결 방법**:
1. 이미지 경로 확인 (상대 경로 사용)
2. Vercel 배포 후 정적 자산 경로 확인
3. `manifest.json` 아이콘 경로 확인

---

## 테스트 완료 후

### 1. 테스트 결과 기록

- 테스트한 기능 목록
- 발견된 문제점
- 개선 사항

### 2. 문제 수정

- 발견된 문제 해결
- 재배포 (필요시)

### 3. 검수 요청 준비

- 모든 기능 정상 작동 확인
- 앱 정보 최종 확인
- 검수 요청

---

## 유용한 링크

- [앱인토스 개발자센터](https://developers-apps-in-toss.toss.im)
- [테스트 가이드](https://developers-apps-in-toss.toss.im/development/test.html)
- [샌드박스 앱 다운로드](https://developers-apps-in-toss.toss.im/development/test.html)

---

## 빠른 시작 가이드

### 1단계: 앱 등록 (5분)
```
앱인토스 콘솔 > 내 앱 > 새 앱 등록
→ 앱 이름 입력
→ 고유 ID 입력 (pocket-card-hunter)
→ 웹 URL 입력 (Vercel 주소)
→ 저장
```

### 2단계: 샌드박스 앱 다운로드 (5분)
```
개발자센터 > 테스트 > 샌드박스 앱
→ Android/iOS 다운로드
→ 기기에 설치
```

### 3단계: QR 코드 생성 및 테스트 (10분)
```
콘솔 > 내 앱 > 등록한 앱 > 테스트
→ QR 코드 생성
→ 샌드박스 앱에서 스캔
→ 테스트 진행
```

### 4단계: 테스트 체크리스트 확인 (30분)
```
위의 체크리스트 따라가며
모든 기능 테스트
문제 발견 시 기록
```

---

## 다음 단계

1. ✅ 샌드박스 테스트 완료
2. [ ] 발견된 문제 수정
3. [ ] 검수 요청
4. [ ] 출시

